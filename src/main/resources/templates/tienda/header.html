<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">


    <head th:replace="tienda/head :: head">
        <title>Vaping Soul</title>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg bg-body-tertiary" style="background-color: rgba(0, 0, 0, 0.5)">
            <div class="container-fluid">
                <a class="navbar-brand" style="color: white" th:href="@{/}">Vaping Soul</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <ul class="navbar-nav mr-auto">
                        <div class="navbar-nav">
                            <a class="nav-link active" aria-current="page" style="color: white" th:href="@{/index}">Home</a>
                            <a class="nav-link active" aria-current="page" style="color: white" href="#">Services</a>
                            <a class="nav-link active" aria-current="page" style="color: white" href="#">Prices</a>
                            <a class="nav-link active" aria-current="page" style="color: white" href="#">Contact Us</a>
                            <a class="nav-link active" aria-current="page" style="color: white" th:href="@{/miembros/listar}">Miembros</a>
                            <a class="nav-link active" aria-current="page" style="color: white" th:href="@{/vapes/listar}">Vapes</a>
                        </div>
                    </ul>


                    <ul class="navbar-nav ml-auto" id="users-nav-item" sec:authorize="isAuthenticated()">

                        <!--region For ROLE_USER display shoppingg cart icon-->
                        <!--======================================================================================-->
                        <li class="nav-item d-flex">
                            <span class="shopping-cart align-self-center mx-2 " sec:authorize="hasRole('ROLE_USER')">
                                <a style="background-color: transparent!important;"
                                   data-toggle="collapse"
                                   href="#shopping-cart-collapse" aria-expanded="false"
                                   aria-controls="shopping-cart-collapse">
                                    <i class="fa fa-shopping-cart " id="shopping-cart-icon" aria-hidden="true"
                                       style="background-color: transparent!important"></i>
                                </a>
                                <div class="collapse" id="shopping-cart-collapse" style="position: absolute;"></div>
                                <div class="card card-body">
                                    <p>Vapes:</p>
                                    <a type="button" class="btn btn-primary" style="font-size: 90%" th:href="@{#}">
                                        Go to shopping cart</a>
                                </div>
                            </span>
                        </li>
                        <!--======================================================================================-->
                        <!--endregion-->


                        <!--region Displaying hello + username-->
                        <!--==============================================================================-->
                        <li class="nav-item user-details">
                            <a class="navbar-text" style="color: white" th:href="@{/perfil}">Hello <span sec:authentication="name"></span></a>
                        </li>
                        <!--=============================================================================-->
                        <!--endregion-->


                        <!--region For ROLE_ADMIN display admin page-->
                        <!--================================================================================================-->
                        <li class="nav-item d-flex">
                            <i class="align-self-center fas fa-user-cog" style="color: white;"></i>
                            <a class="nav-link" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/adminPage}">
                                Admin Page
                            </a>
                        </li>
                        <!--================================================================================================-->
                        <!--endregion-->


                        <!--region Logout button-->
                        <!--==================================================================================-->
                        <li class="nav-item" sec:authorize="isAuthenticated()" style="cursor: pointer">
                            <form method="POST" th:action="@{/logout}">
                                <button class="logout" style="font-weight: bold; font-size: 1rem; background-color: transparent; outline: none; border: none; margin: .7rem 0; color: #fff">Logout 
                                    <i class="fas fa-sign-out-alt"></i>
                                </button>
                            </form>
                        </li>
                        <!--==================================================================================-->
                        <!--endregion-->
                    </ul>

                    <!--region Login and Register menu items-->
                    <!--==========================================================================================-->
                    <ul class="navbar-nav ml-auto" sec:authorize="!isAuthenticated()">
                        <li class="nav-item d-flex flex-row">
                            <i class="align-self-center fa fa-user-o " aria-hidden="true" style="color: white;"></i>
                            <a class="nav-link mr-3" style="color: white" th:href="@{/login}" href="/login">Log In</a>
                        </li>
                        <li class="nav-item d-flex flex-row">
                            <i class="align-self-center fa fa-sign-in " aria-hidden="true" style="color: white;"></i>
                            <a class="nav-link" style="color: white" th:href="@{/registrarse}">Registrarse</a>
                        </li>
                    </ul>
                    <!--==========================================================================================-->
                    <!--endregion-->
                </div>
            </div>
        </nav>
        <div th:replace="fragments/jsScripts :: scripts"></div>
    </body>
</html>